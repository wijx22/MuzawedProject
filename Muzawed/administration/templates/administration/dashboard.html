

{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <link href="{% static 'css/admin-dashboard.css' %}" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


</head>
<style>
  .icon-spacing{
    margin-right: 20px;
    margin-left: 20px;
  }

    .section-space {
      margin-bottom: 40px; /* Ø£Ùˆ Ø­Ø³Ø¨ Ù…Ø§ ÙŠÙ†Ø§Ø³Ø¨Ùƒ */
    }
  

  
</style>
<body>
<!-- Header -->
<div class="header">
  
  <span>Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ Admin</span>
  <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
</div>

<!-- Dashboard -->
<div class="dashboard">

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <!--<ul>
      <li><a href="#">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a></li>
      <li><a href="#">Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰</a></li> 
      <li><a href="{% url 'administration:suppliers_list_view' %}"> Ø§Ù„Ù…ÙˆØ±Ø¯ÙˆÙ†</a></li>
      <li><a href="{% url 'administration:beneficiary_list_view' %}">Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†</a></li>
      <li><a href="#">Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</a></li>
      <li><a href="#">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a></li>
    </ul>-->
    <ul>
      <li><a href="#"><i class="fas fa-home"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a></li>
      <li><a href="{% url 'administration:report_list'%}"><i class="fas fa-comment-alt"></i> Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰</a></li> 
      <li><a href="{% url 'administration:suppliers_list_view' %}"><i class="fas fa-truck"></i> Ø§Ù„Ù…ÙˆØ±Ø¯ÙˆÙ†</a></li>
      <li><a href="{% url 'administration:supplier_requests_view'%}"><i class="fa-solid fa-folder-plus"></i> Ø·Ù„Ø¨Ø§Øª ØªÙˆØ±ÙŠØ¯ </a></li>

      <li><a href="{% url 'administration:beneficiary_list_view' %}"><i class="fas fa-users"></i> Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†</a></li>
      <li><a href="{% url 'administration:contact_messages_list' %}"><i class="fas fa-envelope"></i> ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
      <li><a href="#"><i class="fas fa-bell"></i> Ø§Ù„Ø£Ø´Ø¹Ø§Ø±Ø§Øª </a></li>


      <li><a href="#"><i class="fas fa-cogs"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a></li>
      <li><a href="#"><i class="fas fa-cogs"></i> Ø§Ù„Ø·Ù„Ø¨Ø§Øª </a></li>

    </ul>
  
  </div>
  

  <div class="main">
    <div class="stats " style="display: flex; gap: 20px; flex-wrap: wrap;">
  
      <div class="card " style="display: flex; align-items: center; min-width: 250px; padding: 10px;">
        <div class="icon" style="color: #e67e22; margin-right: 20px;">
          <i class="fa fa-users fa-2x icon-spacing"></i>
        </div>
        <div>
          <h3>Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯</h3>
          <p>{{ new_suppliers_count }}</p>
        </div>
      </div>
  
      <div class="card" style="display: flex; align-items: center; min-width: 250px; padding: 10px;">
        <div class="icon" style="color: #e67e22; margin-right: 15px;">
          <i class="fa fa-hand-holding-heart fa-2x icon-spacing"></i>
        </div>
        <div>
          <h3>Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†</h3>
          <p>{{ beneficiaries_count }}</p>
        </div>
      </div>
  
      <div class="card" style="display: flex; align-items: center; min-width: 250px; padding: 10px;">
        <div class="icon" style="color: #e67e22; margin-right: 15px;">
          <i class="fa fa-users-cog fa-2x icon-spacing"></i>
        </div>
        <div>
          <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
          <p>{{ total_users }}</p>
        </div>
      </div>
    
      <hr>
  
    <!-- ğŸŸ© Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª -->
    <div class="charts-row" style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 20px;">
  
      <!-- Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ -->
      <div class="card" style="flex: 1; min-width: 250px; max-width: 300px; text-align: center;">
        <h3>Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>
        <canvas id="myChart" width="280" height="280" style="border:1px solid #ccc;"></canvas>
      </div>
  
      <!-- Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ -->
      <div class="card" style="flex: 1; min-width: 250px; max-width: 300px; text-align: center;">
        <h3>ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
        <canvas id="userChart"
          data-suppliers="{{ new_suppliers_count }}"
          data-beneficiaries="{{ beneficiaries_count }}"
          data-total="{{ total_users }}"
          width="280" height="280">
        </canvas>
      </div>
  
      <!-- Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø«Ø§Ù„Ø« -->
      <div class="card" style="flex: 1; min-width: 250px; max-width: 300px; text-align: center;">
        <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØ±ÙŠØ¯</h3>
        <canvas id="supplyStatusChart"
          data-accepted="{{ status_counts.Ù…Ù‚Ø¨ÙˆÙ„|default:0 }}"
          data-rejected="{{ status_counts.Ù…Ø±ÙÙˆØ¶|default:0 }}"
          data-pending="{{ status_counts.Ù‚ÙŠØ¯_Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©|default:0 }}"
          width="280" height="280">
        </canvas>
      </div>
  
    </div>
  </div>
  <hr>


<div class="container mt-5">
  <h2 class="d-flex justify-content-center align-items-center fw-bold mb-3" style="color: #4A3A20; text-align: center;">
    Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    <i class="fas fa-store me-3" style="font-size: 30px; color: #e67e2e;"></i>
  </h2>
  
  {% if suppliers %}
    <div class="table-responsive">
      <table class="table table-bordered table-striped align-middle" dir="rtl" style="width: 100%; max-width: 100%; table-layout: fixed;">
        <thead>
          <tr style="background-color: #4A3A20; color: white;">
            <th style="width: 10%;">#</th>
            <th style="width: 30%;">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯</th>
            <th style="width: 30%;">Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</th>
            <th style="width: 30%;">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
          </tr>
        </thead>
        <tbody>
          {% for supplier in suppliers %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ supplier.user.get_full_name }}</td>
              <td>{{ supplier.get_status_display }}</td>
              <td>
                <a href="{% url 'administration:supplier_request_detail' supplier.id %}" class="btn btn-sm btn-primary-custom" style="color: #4A3A20;">
                  Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
  <div class="alert alert-info text-center d-flex justify-content-center align-items-center" role="alert" style="background-color: #e67e2e; color: white;">
    <i class="fas fa-info-circle me-2" style="font-size: 20px;"></i>
    <span class="mx-2">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†.</span>
  </div>
        {% endif %}
</div>

<hr>

<div class="card">
  <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰</h3>
  <table class="styled-table">
      <thead>
          <tr>
              <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
              <th>Ø§Ù„Ø¹Ø¯Ø¯</th>
          </tr>
      </thead>
      <tbody>
          <tr>
              <td>Ù…ÙØªÙˆØ­Ø©</td>
              <td>{{ open_count|default:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª" }}</td>
          </tr>
          <tr>
              <td>Ù…ØºÙ„Ù‚Ø©</td>
              <td>{{ closed_count|default:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª" }}</td>
          </tr>
          <tr>
              <td>Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</td>
              <td>{{ processing_count|default:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª" }}</td>
          </tr>
      </tbody>
  </table>
</div>




<script src="{% static 'js/admin-dashboard.js' %}"></script>


<!--<script>
const xValues = ["Italy", "France", "Spain", "USA", "Argentina"];
const yValues = [55, 49, 44, 24, 15];
const barColors = ["red", "green", "blue", "orange", "brown"];

new Chart("myChart", {
  type: "bar",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    responsive: false,              
    maintainAspectRatio: false,    
    plugins: {
      legend: { display: false },
      title: {
        display: true,
        text: "World Wine Production 2018"
      }
    },
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});
</script>-->


</body>