

{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ููุญุฉ ุงูุชุญูู</title>
  <link href="{% static 'css/admin-dashboard.css' %}" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


</head>
<body>
<!-- Header
<div class="header">
  
  <span>ูุฑุญุจูุงุ Admin</span>
  <button class="menu-btn" onclick="toggleSidebar()">โฐ</button>
</div>
<div class="header" style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background-color: #264F3F;">
  <div style="display: flex; align-items: center; gap: 8px;">
    <i class="fa fa-user" aria-hidden="true"></i>
    <span>ูุฑุญุจูุงุ ุงูุฃุฏูู</span>
  </div>
  <button class="menu-btn" onclick="toggleSidebar()" style="font-size: 18px;">โฐ</button>
</div>-->

<div class="header">
  <div class="admin-info">
    <i class="fa fa-user" aria-hidden="true"></i>
    <span>ูุฑุญุจูุงุ ุงูุฃุฏูู</span>
  </div>
  <button class="menu-btn" onclick="toggleSidebar()">โฐ</button>
</div>



<!-- Dashboard -->
<div class="dashboard">

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <!--<ul>
      <li><a href="#">ููุญุฉ ุงูุชุญูู</a></li>
      <li><a href="#">ุงูุดูุงูู</a></li> 
      <li><a href="{% url 'administration:suppliers_list_view' %}"> ุงูููุฑุฏูู</a></li>
      <li><a href="{% url 'administration:beneficiary_list_view' %}">ุงููุณุชููุฏูู</a></li>
      <li><a href="#">ุงููููุงุช ุงูุดุฎุตูุฉ</a></li>
      <li><a href="#">ุงูุฅุนุฏุงุฏุงุช</a></li>
    </ul>-->
    <ul>
      <li><a href="#"><i class="fas fa-home"></i> ููุญุฉ ุงูุชุญูู</a></li>
      <li><a href="{% url 'administration:report_list'%}"><i class="fas fa-comment-alt"></i> ุงูุดูุงูู</a></li> 
      <li><a href="{% url 'administration:suppliers_list_view' %}"><i class="fas fa-truck"></i> ุงูููุฑุฏูู</a></li>
      <li><a href="{% url 'administration:supplier_requests_view'%}"><i class="fa-solid fa-folder-plus"></i> ุทูุจุงุช ุชูุฑูุฏ </a></li>

      <li><a href="{% url 'administration:beneficiary_list_view' %}"><i class="fas fa-users"></i> ุงููุณุชููุฏูู</a></li>
      <li><a href="{% url 'administration:contact_messages_list' %}"><i class="fas fa-envelope"></i> ุชูุงุตู ูุนูุง</a></li>
      <li><a href="#"><i class="fas fa-bell"></i> ุงูุฃุดุนุงุฑุงุช </a></li>


      <li><a href="#"><i class="fas fa-cogs"></i> ุงูุฅุนุฏุงุฏุงุช</a></li>
      <li><a href="#"><i class="fas fa-cogs"></i> ุงูุทูุจุงุช </a></li>

    </ul>
  
  </div>
  

  <div class="main">
    <div class="stats " style="display: flex; gap: 20px; flex-wrap: wrap;">
  
      <div class="card " style="display: flex; align-items: center; min-width: 250px; padding: 10px;">
        <div class="icon" style="color: #e67e22; margin-right: 20px;">
          <i class="fa fa-users fa-2x icon-spacing"></i>
        </div>
        <div>
          <h3>ุงูููุฑุฏูู ุงูุฌุฏุฏ</h3>
          <p>{{ new_suppliers_count }}</p>
        </div>
      </div>
  
      <div class="card" style="display: flex; align-items: center; min-width: 250px; padding: 10px;">
        <div class="icon" style="color: #e67e22; margin-right: 15px;">
          <i class="fa fa-hand-holding-heart fa-2x icon-spacing"></i>
        </div>
        <div>
          <h3>ุงููุณุชููุฏูู</h3>
          <p>{{ beneficiaries_count }}</p>
        </div>
      </div>
  
      <div class="card" style="display: flex; align-items: center; min-width: 250px; padding: 10px;">
        <div class="icon" style="color: #e67e22; margin-right: 15px;">
          <i class="fa fa-users-cog fa-2x icon-spacing"></i>
        </div>
        <div>
          <h3>ุฅุฌูุงูู ุงููุณุชุฎุฏููู</h3>
          <p>{{ total_users }}</p>
        </div>
      </div>
    
      <hr>
  
    <!-- ๐ฉ ุญุงููุฉ ุงูุฑุณููุงุช -->
    <div class="charts-row" style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 20px;">
  
      <!-- ุงูุฑุณู ุงูุฃูู -->
      <div class="card" style="flex: 1; min-width: 250px; max-width: 300px; text-align: center;">
        <h3>ุญุงูุฉ ุงูููุฑุฏูู</h3>
        <canvas id="myChart" width="280" height="280" style="border:1px solid #ccc;"></canvas>
      </div>
  
      <!-- ุงูุฑุณู ุงูุซุงูู -->
      <div class="card" style="flex: 1; min-width: 250px; max-width: 300px; text-align: center;">
        <h3>ุชูุฒูุน ุงููุณุชุฎุฏููู</h3>
        <canvas id="userChart"
          data-suppliers="{{ new_suppliers_count }}"
          data-beneficiaries="{{ beneficiaries_count }}"
          data-total="{{ total_users }}"
          width="280" height="280">
        </canvas>
      </div>
  
      <!-- ุงูุฑุณู ุงูุซุงูุซ -->
      <div class="card" style="flex: 1; min-width: 250px; max-width: 300px; text-align: center;">
        <h3>ุฅุญุตุงุฆูุงุช ุทูุจุงุช ุงูุชูุฑูุฏ</h3>
        <canvas id="supplyStatusChart"
          data-accepted="{{ status_counts.ููุจูู|default:0 }}"
          data-rejected="{{ status_counts.ูุฑููุถ|default:0 }}"
          data-pending="{{ status_counts.ููุฏ_ุงููุนุงูุฌุฉ|default:0 }}"
          width="280" height="280">
        </canvas>
      </div>
  
    </div>
  </div>
  <hr>


<div class="container mt-5">
  <h2 class="d-flex justify-content-center align-items-center fw-bold mb-3" style="color: #4A3A20; text-align: center;">
    ุทูุจุงุช ุงูููุฑุฏูู ุงูุฌุฏูุฏุฉ
    <i class="fas fa-store me-3" style="font-size: 30px; color: #e67e2e;"></i>
  </h2>
  
  {% if suppliers %}
    <div class="table-responsive">
      <table class="table table-bordered table-striped align-middle" dir="rtl" style="width: 100%; max-width: 100%; table-layout: fixed;">
        <thead>
          <tr style="background-color: #4A3A20; color: white;">
            <th style="width: 10%;">#</th>
            <th style="width: 30%;">ุงุณู ุงูููุฑุฏ</th>
            <th style="width: 30%;">ุญุงูุฉ ุงูุทูุจ</th>
            <th style="width: 30%;">ุงูุฅุฌุฑุงุก</th>
          </tr>
        </thead>
        <tbody>
          {% for supplier in suppliers %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ supplier.user.get_full_name }}</td>
              <td>{{ supplier.get_status_display }}</td>
              <td>
                <a href="{% url 'administration:supplier_request_detail' supplier.id %}" class="btn btn-sm btn-primary-custom" style="color: #4A3A20;">
                  ุนุฑุถ ุงูุชูุงุตูู
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
  <div class="alert alert-info text-center d-flex justify-content-center align-items-center" role="alert" style="background-color: #e67e2e; color: white;">
    <i class="fas fa-info-circle me-2" style="font-size: 20px;"></i>
    <span class="mx-2">ูุง ุชูุฌุฏ ุทูุจุงุช ููุฏ ุงููุนุงูุฌุฉ ูู ุงูููุฑุฏูู.</span>
  </div>
        {% endif %}
</div>

<hr>

<div class="card">
  <h3>ุฅุญุตุงุฆูุงุช ุงูุดูุงูู</h3>
  <table class="styled-table">
      <thead>
          <tr>
              <th>ุงูุญุงูุฉ</th>
              <th>ุงูุนุฏุฏ</th>
          </tr>
      </thead>
      <tbody>
          <tr>
              <td>ููุชูุญุฉ</td>
              <td>{{ open_count|default:"ูุง ุชูุฌุฏ ุจูุงูุงุช" }}</td>
          </tr>
          <tr>
              <td>ูุบููุฉ</td>
              <td>{{ closed_count|default:"ูุง ุชูุฌุฏ ุจูุงูุงุช" }}</td>
          </tr>
          <tr>
              <td>ููุฏ ุงููุนุงูุฌุฉ</td>
              <td>{{ processing_count|default:"ูุง ุชูุฌุฏ ุจูุงูุงุช" }}</td>
          </tr>
      </tbody>
  </table>
</div>




<script src="{% static 'js/admin-dashboard.js' %}"></script>


<footer style="background-color: #f0f0f0; text-align: center; padding: 15px; margin-top: 30px; font-size: 14px;">
  <i class="fa fa-shield-alt" aria-hidden="true" style="margin-left: 5px;"></i>
  ยฉ 2025 - ููุญุฉ ุชุญูู ุงูุฃุฏูู
</footer>


</body>